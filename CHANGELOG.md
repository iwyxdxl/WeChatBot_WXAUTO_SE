# 更新日志 / CHANGELOG

本文件记录了WeChatBot_WXAUTO_SE相对于原始KouriChat项目的主要修改历史。

## 重要说明
- 本项目基于KouriChat项目进行了大量修改和重构
- 由于修改范围广泛且深入，无法精确标注每处修改的具体日期
- 所有修改均在2025年期间完成，遵循GPL-3.0许可证

## v3.24 (2025年9月13日)
- Bot学会了识别拍一拍，并可以在回复中使用[tickle]和[tickle_self]来拍一拍用户和机器人自己
- 学会了使用撤回功能，可以在回复中使用[recall]来撤回机器人上一条发送的消息
- 增加核心记忆功能，记忆片段可以自行选择保存在Prompt当中或核心记忆文件当中
- 趣味论坛功能的头像设置修改为从本地上传图片作为头像
- 新增/总结（或/ms）指令，可以立即进行一次临时记忆总结成记忆片段
- 新增选择旧版本文件夹并一键完整导入prompts、emojis等数据功能
- 完善ext报错处理
- 修复其它bug并优化使用体验

## v3.23 (2025年8月20日)
- 新增趣味实验室-角色论坛功能（可以让你喜欢的角色发布论坛帖子！欢迎尝鲜！）
- 新增指令功能：可控制重启、主动消息、语音通话和清除记忆
- 完善记忆整理功能，避免'utf-8' codec can't decode byte...问题
- 修复给群聊设置备注后会识别成私聊的问题
- 完善更新器使其支持国内更新源
- 针对NoneType object has no attribute 'strip问题进行优化
- 修复其它bug并优化使用体验

## v3.22.1 (2025年7月12日)
- 新增一键排查程序问题功能
- 为图片识别和表情包识别增加重试机制，提高识别成功率
- 为文本消息和表情包发送增加重试机制，提高发送成功率
- 修复程序启动时微信主界面没打开导致消息发送失败
- 修复手机端打开配置编辑器出现显示异常问题
- 隐藏了网页端Api Key避免泄露
- 优化使用体验

## v3.21.1 (2025年6月23日)
- 修复3.21群聊问题
- 修复了引用消息无法识别的问题
- 新增对合并转发消息的识别功能，并且支持识别合并消息中的图片
- 支持了遇到敏感词检测时自动清除上下文功能，避免反复报错问题
- 修复了表情包识别的裁切问题
- 修复部分用户会出现图片保存失败的问题
- 修复小概率出现not supported between instances of 'int' and 'str'问题
- 优化微信版本检测体验
- 修复其它已知问题

## v3.20 (2025年6月14日)
- 新增辅助模型功能，可以使用辅助模型进行表情包、联网、定时提醒判断以减小消耗
- 主动消息支持屏蔽群聊
- 现在支持全后台微信操作并大幅度优化微信自动控制的性能
- 语音通话和表情包识别不再需要弹出微信界面
- 现在微信语音设置为非简体中文也能正常使用程序
- 配置编辑器新增恢复默认设置按钮
- 支持了微信版本检测
- 优化聊天效果修复一些聊天时的小bug

## v3.19 (2025年5月25日)
- 程序自动重启后主动消息时间不再重新计时
- 修复换行符会被移除的问题
- 新增强制移除括号及其中内容功能
- 修复3.18版本在python3.8-3.9无法运行的问题
- WeAPIs新增Claude4

## v3.18 (2025年5月17日)
- 修复程序自动重启后配置编辑器显示程序未启动的问题
- 修复重复启动Bot导致一条消息回复两次（甚至多次）
- 优化定时提醒识别逻辑，现在使用claude模型也能正常设置定时提醒
- 修复其它已知问题

## v3.17 (2025年5月15日)
- 配置编辑器全新升级，更加直观易用，针对手机端优化显示效果
- 配置编辑器支持删除用户的上下文临时记忆
- 新增快速上手页面方便新用户快速完成配置
- 群聊支持设置触发回复关键词和回复概率
- 新增定时重启功能以解决程序长时间运行后回复速度变慢问题
- 增加了配置文件校验避免缺项导致程序无法运行
- 接收语音消息时增加了延迟提高识别成功率
- 修复时间戳清理不干净导致回复带']'的问题
- 修复其它已知问题

## v3.16 (2025年5月7日)
- 修改图片保存逻辑，避免保存失败导致图片无法识别
- 支持设置用户与AI的对话上下文轮数
- 重启程序不再损失上下文记忆
- 新增内存监控，当内存超过阈值时自动清理避免拖慢程序运行
- 兼容Gemini新思考模型回复，避免输出思考过程
- 修复无strip报错:未知错误：'NoneType' object has no attribute 'strip'
- 新增获取回复失败时自动重试功能
- 修复其它已知问题

## v3.15 (2025年4月24日)
- 新增读取链接和卡片链接内容功能
- 修复识图功能可能导致微信崩溃的问题
- 允许自行决定是否以换行符分隔消息
- WeAPIs新增Gemini 2.5 Pro支持
- 修改flask配置以便开放端口
- 去除消息队列的五条消息限制
- 修复其它已知问题和优化使用体验

## v3.14 (2025年4月16日)
- 新增定时提醒功能并支持拨打语音通话提醒
- 新增联网搜索功能
- 新增从历史版本的config.py文件导入配置功能
- 改善图片识别功能，提高识别成功率
- 现在可选是否允许AI读取Prompt当中的记忆片段
- 现在允许自定义识图模型
- 修复监听列表有多个人时主动消息无法正常使用的问题
- 增加使用文档链接
- 更新器增加备份重要文件功能
- 修复其它已知问题

## v3.13 (2025年4月7日)
- 优化logging和取消.venv环境以避免拖慢bot运行速度

## v3.12 (2025年4月6日)
- WeAPIs新增豆包模型支持
- 现在可以在网页端查看日志信息
- 修复wxauto文件被占用导致程序停止运行的问题
- 修复无法获取新记忆片段时间的问题
- 不再保存自己发送的图片或表情包
- 不再输出查询Bot状态消息
- 修复更新器无法下载更新的问题
- 修复其它已知问题

## v3.11 (2025年4月3日)
- 现在支持接收语音消息（需要在微信 设置-通用设置-打开'聊天中的语音消息自动转文字'）
- 实现了后台收发消息，修复滑动微信窗口会重复接收消息的问题
- 为时间轴增加了显示当前星期几的功能
- 改进了记忆功能当中ai与用户的称呼（现在使用prompt文件名作为ai对自己的称呼，用用户微信名作为ai对用户的称呼）
- 优化了提示词生成功能，避免默认人设对提示词生成造成影响
- 优化了部分页面的显示，为prompt编辑页面增加字数显示
- 修复了其它一些bug

## v3.10 (2025年3月16日)
- 新增自定义表情包分类功能
- 新增密码登录功能并支持修改网页端口
- 修复主动消息未带时间戳的问题
- 完善法律信息
- 优化配置编辑器页面
- 修复其它已知问题

## v3.9 (2025年3月6日)
- 修复主动消息时间无法配置为小数的问题
- 新增WeAPIs接口:支持GPT、Grok、Claude、Gemini、Deepseek R1联网版等多种全新模型
- 修复了一些已知的问题

## v3.8 (2025年3月3日)
- 修复了配置未保存但仍然显示保存成功的问题
- 修复等待时间无法设置为小数的问题
- 新版本的更新器更新时可以保留config.py的内容

## v3.7 (2025年3月2日)
- 修复config.py可能被清空的问题
- 修复emojis/False不存在
- 修复输出可能带时间的问题
- 修复了记忆重要度功能和淘汰功能
- 优化文本

## v3.6 (2025年2月27日)
- 现在可以为微信用户自由分配Prompt
- 增加依赖包
- 完善Run.bat
- 修复bugs
- 增加错误提示

## v3.5 (2025年2月25日)
- 增加自动更新功能

## v3.4 (2025年2月25日)
- 新增提示词生成器

## v3.3 (2025年2月23日)
- 新增群聊功能
- 增加自定义API提供商功能

## v3.2 (2025年2月19日)
- 替换lf换行为crlf解决使用Run.bat无法正常启动程序的问题

## v3.1 (2025年2月19日)
- 完善readme.md和文本

## v3.0 (2025年2月19日)
- 新增记忆功能
- 新增识别情绪回复表情包功能

## v2.2 (2025年2月19日)
- 新增网页prompt编辑器
- 新增网页端启动Bot

## v2.1 (2025年2月18日)
- 新增功能开关
- 优化启动程序

## v2.0 (2025年2月18日)
- 新增Web UI

## v1.2 (2025年2月13日)
- 优化使用体验
- 优化聊天体验

## v1.1 (2025年2月13日)
- 增加Run.bat

## v1.0 (2025年2月12日)
- 优化多用户聊天体验
- 支持为每个用户分配单独的Prompt
- 增加识图功能
- 智能消息队列，自动调整消息间隔
- 支持时间感知
- 自动发送表情包

## 许可证合规声明
- 本项目保持与原项目相同的GPL-3.0许可证
- 保留了原项目的版权信息和归属
- 所有修改均公开透明，遵循自由软件原则
- 用户享有与原项目相同的自由软件权利
